<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
<head>
   <title>Información del ratón</title> 
   <meta charset="utf-8">
<style type="text/css">
body  { width: 1500px; }
h3  { position: fixed; }
#caja { position: absolute; width: 100px; height: 100px; border: 1px solid black; 
        background-color: yellow; top: 70px } 
#textos { position: fixed; width: 300px; height: 200px; border: 1px solid black; z-index: -1;
        right: 50px; top:100px;  }
</style>
<script type="text/javascript">
var estado = "parar" // Estado inicial del cuadrado: sin mover
function info(elEvento) {
         var evento = elEvento || window.event; //obtener objeto event
         var despX = document.documentElement.scrollLeft; //desplazamiento de la pagiina al hacer scroll
         var despY = document.documentElement.scrollTop;
         var ventanaX = evento.clientX; //coordenadas de la ventana
         var ventanaY = evento.clientY;
         var paginaX =  ventanaX + despX; //coordenadas de la página
         var paginaY =  ventanaY + despY;
         var pantallaX = evento.screenX //coordenadas de la pantalla
         var pantallaY = evento.screenY
         caja1 = document.getElementById("caja") //posición del cuadrado
         posx = paginaX - 50
         posy = paginaY - 50
         if (estado == "mover"){ //desplazamiento del cuadrado
             caja1.style.left = posx + "px"
             caja1.style.top = posy + "px"	
             }
         texto = document.getElementById("posicion") //escribir coordenadas de la página
         texto.innerHTML = "Coordenadas de la página: " + paginaX + "px, " + paginaY + "px."
         texto2 = document.getElementById("ventana") //escribir coordenadas de la ventana
         texto2.innerHTML = "Coordenadas de la ventana:  " + ventanaX + "px, " + ventanaY + "px."
         texto3 = document.getElementById("pantalla") //escribir coordenadas de la pantalla
         texto3.innerHTML = "Coordenadas de la pantalla: " + pantallaX + "px, " + pantallaY + "px." 
         texto4 = document.getElementById("accion") //e3scribir estado del cuadrado
         texto4.innerHTML = "Movimiento del cuadrado: " + estado
         texto5 = document.getElementById("desplaza") //scroll de la página
         texto5.innerHTML = "Desplazamiento de la página: " + despX + ", " + despY
         }	
function mover(ev){ //control del movimiento del cuadrado
         var evento2 = ev || window.event //distinguir acción del ratón
         tipo = evento2.type
         if (tipo == "click") { //coger el cuadrado (un  click)
            estado = "mover"
            }
         else if (tipo == "dblclick") { //soltar el cuadrado (doble click)
            estado = "parar"
            }
         }
window.onload = function() { //provocar los eventos				
document.body.onmousemove = info	
document.getElementById("caja").onclick = mover;
document.getElementById("caja").ondblclick = mover;
}
</script>
</head>
<body>
<h3>Arrastra este cuadrado: Haz un click encima de él para cogerlo y doble click para soltarlo.</h3>
  <div id="caja"></div>
  <br/><br/><br/><br/><br/>
<div id="textos">
   <p id="posicion">Coordenadas de la página: </p>
   <p id="ventana">Coordenadas  de la ventana: </p>
   <p id="pantalla">Coordenadas  de la pantalla:</p>
   <p id="accion"> Estado: </p>
   <p id="desplaza" ></p>
</div>
  <br/><br/><br/><br/><br/><br/><br/><br/><br/><br/>
  <p>Parrafo para alargar la página.</p>
  <br/><br/><br/><br/><br/>
  <p>Parrafo para alargar la página.</p>
  <br/><br/><br/><br/><br/>
  <p>Parrafo para alargar la página.</p>
</body>
</html>
